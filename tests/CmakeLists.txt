# Include the main source directory
include_directories(${SRC_DIR})

# Locate GTest
find_package(GTest REQUIRED)
include_directories(${GTEST_INCLUDE_DIRS})

# Collect test files
file(GLOB TEST_FILES ${TEST_DIR}/*.cpp)

# Add the test executable
add_executable(run_tests ${TEST_FILES})

# Link libraries for tests
target_link_libraries(run_tests GTest::GTest GTest::Main pthread)

# Add tests to CTest
add_test(NAME TrafficMonitoringTests COMMAND run_tests)